# 拾光回忆
欢迎star🌟，欢迎关注我的公众号“智识补丁”，致力于分享一些有用的内容。

![qrcode_for_gh_bf3937675bfa_430](assets/qrcode_for_gh_bf3937675bfa_430.jpg)

## 项目简介

拾光记忆是一个基于 React + FastAPI 的个人记忆/日记记录系统，通过视觉化的"人生网格"帮助用户记录和回顾生命中的重要时刻。系统将用户的整个生命周期划分为 52周 × 100年 的网格，每个格子代表生命中的一周。

**功能亮点：**

✅ 仅管理员可邀请注册（适合家庭/情侣/密友圈）

✅ 移动端适配良好

✅ 资源占用极低

✅ 数据完全只有你可见

## 核心功能

### 1. 人生网格视图

#### 功能描述

- 以 52 周为一行，展示用户从出生到预期寿命的所有周
- 每个小格子代表人生中的一周
- 通过年份导航可以切换查看不同年龄的周

#### 视觉效果

- **当前周**：黄色高亮显示，带有光环效果
- **已记录的周**：根据心情显示不同颜色
  - 开心（绿色）
  - 一般（黄色）
  - 艰难（红色）
- **未记录的过去周**：灰色，可点击填写
- **未来周**：深灰色，不可点击，显示"未来时间，无法记录"

### 2. 周记录功能

#### 功能描述

点击任意已过去或当前周的格子，可以记录该周的内容。

#### 记录内容

- **标题**：简短描述这一周的主题
- **心情**：三种选择
  - 开心 😊
  - 一般 😐
  - 艰难 😔
- **详细内容**：支持多行文本，记录具体事件和感受
- **图片**：支持上传多张图片，自动压缩存储

#### 图片处理

- 支持多张图片上传
- 支持粘贴板直接上传图片（Ctrl+V）
- 自动修正手机拍摄图片的方向（EXIF）
- 双尺寸存储：原图（全质量）+ 缩略图（最大 800px）
- 支持保留/删除部分图片
- 图片显示在格子中作为背景预览

### 3. 用户系统

#### 账户功能

- **注册**：管理员可创建新用户账户
- **登录**：用户名密码登录
- **登出**：安全退出系统

#### 个人资料

- **昵称**：自定义显示名称
- **头像**：
  - 支持上传本地图片（自动裁剪为 200×200 像素）
  - 支持输入头像 URL
  - 支持 JPEG、PNG、GIF、WebP 格式（最大 5MB）
  - 自动修正手机拍摄图片的方向（EXIF）
  - 显示为圆形
- **出生日期**：年/月/日下拉选择器
- **密码修改**：
  - 需验证旧密码
  - 新密码至少 6 位字符
  - 需确认新密码一致
- **预期寿命**：自定义预期寿命（默认100岁）

#### 统计信息（顶部卡片）

- **人生时钟**：以时钟格式显示已过时间
- **已活周数**：从出生到现在的总周数
- **已活年数**：精确到小数的年龄
- **人生进度**：已过时间占预期寿命的百分比

### 4. 纪念日与计划日

#### 纪念日（蓝色标记）

- 记录重要纪念日（如：恋爱纪念日、结婚纪念日）
- **周年重复**：自动在每年的同一天显示标记
- 在日历和放大日历中用蓝色圆点标记
- 显示"第N周年"信息

#### 计划日（紫色标记）

- 记录一次性计划事件
- **不重复**：只在原始日期显示
- 在日历中用紫色圆点标记

#### 添加方式

- 输入事件名称
- 选择年/月/日
- 选择类型（纪念日或计划日）

### 5. 日历功能

#### 主界面日历

- 显示在页面右侧栏
- 显示当前月份
- 星期顺序：一、二、三、四、五、六、日
- 今日高亮（黄色圆圈）
- 纪念日/计划日标记（蓝色/紫色圆点）

#### 放大日历

- 点击主界面日历可弹出放大视图
- 支持月份切换（上一月/下一月）
- 显示纪念日/计划日的详细标题
- 更大的显示空间，便于查看

#### 图例说明

- 蓝色圆点：纪念日
- 紫色圆点：计划日
- 黄色背景：今天

### 6. 目标清单

#### 功能描述

- 在右侧栏显示目标清单
- 支持添加、删除、完成目标
- **服务器同步**：多设备登录可自动同步目标清单

#### 操作方式

- 输入框添加新目标
- 点击目标标记为完成（显示删除线）
- 完成的目标会记录完成时间和当时所在的周

---

### 7. 相册功能

#### 功能描述

- 汇总展示所有周记录中的图片
- 瀑布流布局显示

#### 功能特性

- **普通模式**：弹窗显示
- **全屏模式**：点击最大化按钮扩展到全屏，显示更多列
- **图片预览**：点击图片可放大查看
- **全屏预览**：预览时可切换全屏模式

---

### 8. 数据导出

#### 导出格式

- **Markdown (.md)**：每周一个独立文件，完美支持中文
- **图片**：实际下载所有图片文件

#### 导出内容

- 选择导出日期范围（开始日期 - 结束日期）
- 每周记录包含：
  - 年份和周数
  - 标题
  - 心情
  - 详细内容
  - 关联图片

#### 文件命名

- Markdown 文件：`年份_第几周_标题.md`
- 图片文件：`年份_第几周_标题_防重编码.扩展名`

#### 导出结构

```
拾光记忆_导出_2026-01-18.zip
├── 2026_第1周_元旦.md
├── 2026_第2周_工作总结.md
├── 2026_第3周_新年计划.md
└── images/
    ├── 2026_第1周_元旦_a3f2b1.jpg
    ├── 2026_第3周_新年计划_b2c3d4.jpg
    └── ...
```

---

### 9. 响应式设计

#### 支持设备

- **桌面电脑**（1200px+）：完整功能显示
- **平板设备**（768px-1199px）：适配中等屏幕
- **手机设备**（320px-767px）：移动端优化

#### 响应式特性

- 导航栏：小屏幕减小间距，部分文字只显示图标
- 统计卡片：小屏幕 2 列，大屏幕 4 列
- 周网格：支持横向滚动，格子尺寸自适应
- 侧边栏：大屏幕横向布局，小屏幕垂直堆叠

---

## 技术架构

### 前端

- **框架**：React + Vite
- **样式**：Tailwind CSS
- **图标**：Lucide React
- **导出**：JSZip + FileSaver

### 后端

- **框架**：FastAPI (Python)
- **数据库**：SQLite
- **认证**：JWT Token

## 更新

- 2026.2.7 记录的文字支持表情；图片支持粘贴板直接上传；头像上传自动裁剪；密码修改功能优化
- 2026.1.19 目标清单支持服务器同步（多设备同步）；修复图片方向问题；周索引计算优化为实际日历周

## 部署请参考“部署.md”文件


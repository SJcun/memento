# Memento 开发计划

## 项目定位
为局部小群体记录生活、分享内容而建立的个人/多人日记系统。

---

## 功能清单

### 1. 人生统计面板

**展示内容：**
- 已记录总周数
- 累计上传图片数量
- 连续记录 streak（最长连续记录周数）
- 当前连续记录周数
- 情绪分布饼图（开心/一般/艰难的比例）

**位置：** Dashboard 侧边栏或独立统计卡片

---

### 2. 情绪趋势图（按年）

**展示方式：**
- X 轴：52 周
- Y 轴：情绪值（开心=3，一般=2，艰难=1）
- 折线图或柱状图展示
- 支持切换不同年份查看
- 鼠标悬停显示该周详情

**技术方案：** 使用轻量级图表库（Chart.js 或 recharts）

---

### 3. 搜索功能

**搜索范围：**
- 标题、内容（全文搜索）
- 标签
- 情绪类型
- 是否有图片

**搜索结果：**
- 显示匹配的周单元格高亮
- 列表形式展示匹配记录
- 支持按时间排序

**位置：** 顶部搜索栏，支持快捷键唤起（Ctrl+K）

---

### 4. 数据导出功能完善

**新增导出格式：**
- PDF：带封面、目录、精美排版
- JSON：完整数据备份（便于恢复）
- Markdown：保持现有功能

**导出选项：**
- 按日期范围
- 按标签
- 是否包含图片
- 是否包含情绪分析

---

### 5. 生成个人生活海报

**海报内容：**
- 人生网格截图（带高亮标记已记录周）
- 个人统计数据（记录周数、图片数等）
- 情绪年度分布图
- 个性签名/座右铭
- 二维码（可选，指向分享链接）

**风格：** 多套模板可选（简约、复古、插画等）

**用途：** 年度总结、朋友圈分享

---

### 6. 标签功能

**功能点：**
- 每条记录可添加多个标签
- 标签管理（创建、删除、合并、重命名）
- 标签筛选（点击标签显示相关记录）
- 标签统计（使用次数排行）
- 常用标签快速添加

**UI 设计：**
- 编辑记录时显示标签输入框
- 侧边栏显示标签云
- 网格视图支持按标签筛选

---

### 7. "这一周的历史"回顾

**功能描述：**
- 计算当前是第几周（如 2025 年第 6 周）
- 展示去年同一周的记录（如 2024 年第 6 周）
- 展示前年同一周的记录（如 2023 年第 6 周）
- 以此类推，展示历年同期的记录合集

**价值：** 让用户看到"往年这个时候我在做什么"

**UI 呈现：**
- 侧边栏或独立卡片显示
- 标题如"历年这一周"
- 列表展示，点击可跳转到对应周

---

### 8. 目标截止时间与日历标记

**功能设计：**

**目标清单增强：**
- 添加可选的"截止日期"字段
- 截止日期格式：日期选择器

**日历标记：**
- 有截止日期的目标在日历上显示标记
- 标记样式：与现有纪念日/计划日区分（如不同颜色或图标）
- 标记内容：显示目标文本或"目标到期"提示
- 过期未完成的目标：红色高亮

**交互优化：**
- 点击日历上的目标标记，显示目标详情
- 可直接从日历标记跳转到目标清单
- 目标完成后，日历标记变为完成样式（绿色/打钩）

---

## 开发优先级

| 优先级 | 功能 | 理由 |
|--------|------|------|
| 🔥 P0 | 标签功能 | 基础架构功能，影响后续 |
| 🔥 P0 | 搜索功能 | 记录增多后必需 |
| 🔥 P0 | 人生统计面板 | 提升成就感，简单有效 |
| 🔥 P0 | 目标截止时间 | 用户明确提出，实用 |
| 🟡 P1 | 情绪趋势图 | 依赖标签和统计数据 |
| 🟡 P1 | "这一周的历史"回顾 | 增强情感连接 |
| 🟡 P1 | 数据导出完善 | 满足进阶需求 |
| ⚪ P2 | 生活海报生成 | 可选的锦上添花功能 |

---

## 技术实现建议

### 新增依赖
- `chart.js` 或 `recharts` - 情绪趋势图
- `html2canvas` - 海报生成截图
- `jspdf` - PDF 导出（已有部分）

### 数据库改动
- 新增 `tags` 表：标签管理
- 新增 `event_tags` 关联表：记录与标签关联
- `goals` 表增加 `deadline` 字段

### 后端 API 新增
```
GET  /api/stats          - 获取统计数据
GET  /api/tags           - 获取所有标签
POST /api/tags           - 创建标签
PUT  /api/tags/:id       - 更新标签
DELETE /api/tags/:id     - 删除标签
GET  /api/search         - 搜索记录
GET  /api/history/week   - 获取历年同周记录
```

---

## 开发进度

- [ ] 标签功能
- [ ] 搜索功能
- [ ] 人生统计面板
- [ ] 目标截止时间
- [ ] 情绪趋势图
- [ ] "这一周的历史"回顾
- [ ] 数据导出完善
- [ ] 生活海报生成
